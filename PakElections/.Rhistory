link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election.*","",city)
city <- gsub(" General.*","", city)
city <- gsub("^ ","", city)
city
table <- html_nodes(gob, xpath = "//table[@id = 'AutoNumber1']")
table <- html_table(table) %>% .[[1]] %>% .[-1,]
table
table[,1] <- gsub(".\n","", table[,1])
table[,1] <- gsub("\t","", table[,1])
table[,1] <- gsub("\r","", table[,1])
table[,1] <- gsub("\\h{2,10}$", "", table[,1], perl = T)
table[,1] <- gsub("\\h{2,10}", "\\h", table[,1], perl = T)
table <- cbind(table, rep(seat, nrow(table)), rep(city,nrow(table)), rep(year,nrow(table)))
table
tail(results)
table
results <- rbind(results, table)
seat <- 124
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election.*","",city)
city <- gsub(" General.*","", city)
city <- gsub("^ ","", city)
city
table <- html_nodes(gob, xpath = "//table[@id = 'AutoNumber1']")
table <- html_table(table) %>% .[[1]] %>% .[-1,]
table[,1] <- gsub(".\n","", table[,1])
table[,1] <- gsub("\t","", table[,1])
table[,1] <- gsub("\r","", table[,1])
table[,1] <- gsub("\\h{2,10}$", "", table[,1], perl = T)
table[,1] <- gsub("\\h{2,10}", "\\h", table[,1], perl = T)
table <- cbind(table, rep(seat, nrow(table)), rep(city,nrow(table)), rep(year,nrow(table)))
table
seat <- 123
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
table <- html_nodes(gob, xpath = "//table[@id = 'AutoNumber1']")
table <- html_table(table) #%>% .[[1]] %>% .[-1,]
table
table <- html_nodes(gob, xpath = "//table[@id = 'AutoNumber1']")
table
seat
table <- html_table(table) %>% .[[1]] %>% .[-1,] %>% .[,-3]
table[,1] <- gsub(".\n","", table[,1])
table[,1] <- gsub("\t","", table[,1])
table[,1] <- gsub("\r","", table[,1])
table[,1] <- gsub("\\h{2,10}$", "", table[,1], perl = T)
table[,1] <- gsub("\\h{2,10}", "\\h", table[,1], perl = T)
table <- cbind(table, rep(seat, nrow(table)), rep(city,nrow(table)), rep(year,nrow(table)))
table
results <- rbind(results, table)
tail(results)
table <- html_nodes(gob, xpath = "//table[@id = 'AutoNumber1']")
table <- html_table(table) %>% .[[1]] %>% .[-1,]
table <- table[,-3]
colnames(table)[3] <- "x3"
table[,1] <- gsub(".\n","", table[,1])
table[,1] <- gsub("\t","", table[,1])
table[,1] <- gsub("\r","", table[,1])
table[,1] <- gsub("\\h{2,10}$", "", table[,1], perl = T)
table[,1] <- gsub("\\h{2,10}", "\\h", table[,1], perl = T)
table <- cbind(table, rep(seat, nrow(table)), rep(city,nrow(table)), rep(year,nrow(table)))
table
colnames(table)[3] <- "X3"
results <- rbind(results, table)
tail(results)
for (seat in 124:272){
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election.*","",city)
city <- gsub(" General.*","", city)
city <- gsub("^ ","", city)
#table <- html_nodes(gob, xpath = "//h3/following-sibling::table")
table <- html_nodes(gob, xpath = "//table[@id = 'AutoNumber1']")
table <- html_table(table) %>% .[[1]] %>% .[-1,]
#for seat = 123 year = 2008
#table <- table[,-3]
#colnames(table)[3] <- "X3"
table[,1] <- gsub(".\n","", table[,1])
table[,1] <- gsub("\t","", table[,1])
table[,1] <- gsub("\r","", table[,1])
table[,1] <- gsub("\\h{2,10}$", "", table[,1], perl = T)
table[,1] <- gsub("\\h{2,10}", "\\h", table[,1], perl = T)
table <- cbind(table, rep(seat, nrow(table)), rep(city,nrow(table)), rep(year,nrow(table)))
results <- rbind(results, table)
Sys.sleep(3)
}
tail(results)
write.csv(results, file = "Results2008.csv", row.names = F)
year <- 2013
seat <- 1
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election.*","",city)
city <- gsub(" General.*","", city)
city <- gsub("^ ","", city)
city
city <- html_nodes(gob, xpath = "//h3/font/text()")
city
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election.*","",city)
city <- gsub(" General.*","", city)
city <- gsub("\n\\h{1,10}","", city)
city
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election.*","",city)
city <- gsub(" General.*","", city)
city <- gsub("\\n\\h{1,10}","", city)
city
seat <- 100
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city
city <- gsub("\\n\\h{1,10}","", city)
city
?html_nodes
city <- html_nodes(gob, xpath = "//h3/font/text()", collapse = T)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election.*","",city)
city <- gsub(" General.*","", city)
city <- gsub("\\n\\h{1,10}","", city, perl = T)
city
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election.*","",city)
city <- gsub(" General.*","", city)
city
city <- html_nodes(gob, xpath = "//h3/font/text()")
city
city <- gsub(".*NA-\\d{1,3} ","", city)
city
city <- gsub(" G.E.*","",city)
city
city <- gsub(" Election.*","",city)
city
city
city <- html_nodes(gob, xpath = "//h3/font/text()")
city
as.character(city)
gsub(".*NA-\\d{1,3} ","",city)
gsub(".*NA\\d{1,3} ","",city)
seat
seat <- 1
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city
city <- as.character(city)
city
?collapse
cit
city
paste(city,collapse =T)
?paste
paste(city)
paste(city,collapse ="")
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- as.character(city)
city <- paste(city, collapse = "")
city <- gsub(".*NA\\d{1,3} ","", city)
city
city <- gsub(".*NA\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election","",city)
city <- gsub(" General.*","", city)
city <- gsub("^ ","", city)
city
table <- html_nodes(gob, xpath = "//table[@class = 'MsoNormalTable']")
table <- html_table(table) %>% .[[1]] %>% .[-1,]
table
table <- html_nodes(gob, xpath = "//table[@class = "MsoNormalTable"]")
table <- html_nodes(gob, xpath = "//table[@class = 'MsoNormalTable']")
table
table <- html_nodes(gob, xpath = "//h3/following-sibling::table")
table
table <- html_table(table) %>% .[[1]] %>% .[-1,]
table
table[,1] <- gsub(".\n","", table[,1])
table[,1] <- gsub("\t","", table[,1])
table[,1] <- gsub("\r","", table[,1])
table[,1] <- gsub("\\h{2,10}$", "", table[,1], perl = T)
table[,1] <- gsub("\\h{2,10}", "\\h", table[,1], perl = T)
table <- cbind(table, rep(seat, nrow(table)), rep(city,nrow(table)), rep(year,nrow(table)))
table
year <- 2013
for (seat in 1:272){
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- as.character(city)
city <- paste(city, collapse = "")
city <- gsub(".*NA\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election","",city)
city <- gsub(" General.*","", city)
city <- gsub("^ ","", city)
#table <- html_nodes(gob, xpath = "//h3/following-sibling::table")
#table <- html_nodes(gob, xpath = "//table[@id = 'AutoNumber1']")
table <- html_nodes(gob, xpath = "//h3/following-sibling::table")
table <- html_table(table) %>% .[[1]] %>% .[-1,]
#for seat = 123 year = 2008
#table <- table[,-3]
#colnames(table)[3] <- "X3"
table[,1] <- gsub(".\n","", table[,1])
table[,1] <- gsub("\t","", table[,1])
table[,1] <- gsub("\r","", table[,1])
table[,1] <- gsub("\\h{2,10}$", "", table[,1], perl = T)
table[,1] <- gsub("\\h{2,10}", "\\h", table[,1], perl = T)
table <- cbind(table, rep(seat, nrow(table)), rep(city,nrow(table)), rep(year,nrow(table)))
results <- rbind(results, table)
Sys.sleep(3)
}
results <- data.frame(Name = character(0), Party = character(0), Votes= numeric(0), Seat = numeric(0), City = character(0), Year = numeric(0))
for (seat in 1:272){
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- as.character(city)
city <- paste(city, collapse = "")
city <- gsub(".*NA\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election","",city)
city <- gsub(" General.*","", city)
city <- gsub("^ ","", city)
#table <- html_nodes(gob, xpath = "//h3/following-sibling::table")
#table <- html_nodes(gob, xpath = "//table[@id = 'AutoNumber1']")
table <- html_nodes(gob, xpath = "//h3/following-sibling::table")
table <- html_table(table) %>% .[[1]] %>% .[-1,]
#for seat = 123 year = 2008
#table <- table[,-3]
#colnames(table)[3] <- "X3"
table[,1] <- gsub(".\n","", table[,1])
table[,1] <- gsub("\t","", table[,1])
table[,1] <- gsub("\r","", table[,1])
table[,1] <- gsub("\\h{2,10}$", "", table[,1], perl = T)
table[,1] <- gsub("\\h{2,10}", "\\h", table[,1], perl = T)
table <- cbind(table, rep(seat, nrow(table)), rep(city,nrow(table)), rep(year,nrow(table)))
results <- rbind(results, table)
Sys.sleep(3)
}
tail(results)
seat <- 37
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- as.character(city)
city <- paste(city, collapse = "")
city
city <- gsub(".*NA\\d{1,3} ","", city)
city
city <- gsub(".*NA-\\d{1,3} ")
city <- gsub(".*NA-\\d{1,3} ", city)
?gsub
city <- gsub(".*NA-\\d{1,3} ","", city)
city
city <- gsub(" G.E.*","",city)
city <- gsub(" Election","",city)
city
city <- gsub(" General.*","", city)
city <- gsub("^ ","", city)
city
city <- gsub(" \d{4}$","",city)
city <- gsub(" \\d{4}$","",city)
city
tail(results)
seat <-38
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- as.character(city)
city <- paste(city, collapse = "")
city <- gsub(".*NA\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election","",city)
city <- gsub(" General.*","", city)
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" \\d{4}$","",city)
city <- gsub("^ ","", city)
city
table <- html_nodes(gob, xpath = "//h3/following-sibling::table")
table <- html_table(table) %>% .[[1]] %>% .[-1,]
table
seat
tail(results)
seat <- 37
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- as.character(city)
city <- paste(city, collapse = "")
city <- gsub(".*NA\\d{1,3} ","", city)
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election","",city)
city <- gsub(" General.*","", city)
city <- gsub(" \\d{4}$","",city)
city <- gsub("^ ","", city)
table <- html_nodes(gob, xpath = "//h3/following-sibling::table")
table <- html_table(table) %>% .[[1]] %>% .[-1,]
table[,1] <- gsub(".\n","", table[,1])
table[,1] <- gsub("\t","", table[,1])
table[,1] <- gsub("\r","", table[,1])
table[,1] <- gsub("\\h{2,10}$", "", table[,1], perl = T)
table[,1] <- gsub("\\h{2,10}", "\\h", table[,1], perl = T)
table <- cbind(table, rep(seat, nrow(table)), rep(city,nrow(table)), rep(year,nrow(table)))
table
nrow(results)
456-32
results[420:,4]
results[420,4]
results[420: ,4]
results[420:456 ,4]
results[420:456 ,3:4]
results[424,4]
results[425,4]
results[426,4]
results <- rbind(results[1:425,], table)
tail(results)
seat <- 38
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- as.character(city)
city <- paste(city, collapse = "")
city <- gsub(".*NA\\d{1,3} ","", city)
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election","",city)
city <- gsub(" General.*","", city)
city <- gsub(" \\d{4}$","",city)
city <- gsub("^ ","", city)
table <- html_nodes(gob, xpath = "//table[@id = 'AutoNumber1']")
table <- html_table(table) %>% .[[1]] %>% .[-1,]
table[,1] <- gsub(".\n","", table[,1])
table[,1] <- gsub("\t","", table[,1])
table[,1] <- gsub("\r","", table[,1])
table[,1] <- gsub("\\h{2,10}$", "", table[,1], perl = T)
table[,1] <- gsub("\\h{2,10}", "\\h", table[,1], perl = T)
table <- cbind(table, rep(seat, nrow(table)), rep(city,nrow(table)), rep(year,nrow(table)))
table
results <- rbind(results, table)
tail(results)
for (seat in 39:272){
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- as.character(city)
city <- paste(city, collapse = "")
city <- gsub(".*NA\\d{1,3} ","", city)
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election","",city)
city <- gsub(" General.*","", city)
city <- gsub(" \\d{4}$","",city)
city <- gsub("^ ","", city)
table <- html_nodes(gob, xpath = "//h3/following-sibling::table")
#for seat 38
#table <- html_nodes(gob, xpath = "//table[@id = 'AutoNumber1']")
table <- html_table(table) %>% .[[1]] %>% .[-1,]
table[,1] <- gsub(".\n","", table[,1])
table[,1] <- gsub("\t","", table[,1])
table[,1] <- gsub("\r","", table[,1])
table[,1] <- gsub("\\h{2,10}$", "", table[,1], perl = T)
table[,1] <- gsub("\\h{2,10}", "\\h", table[,1], perl = T)
table <- cbind(table, rep(seat, nrow(table)), rep(city,nrow(table)), rep(year,nrow(table)))
results <- rbind(results, table)
Sys.sleep(3)
}
tail(results)
s ea t
seat
city
table <- html_nodes(gob, xpath = "//h2/following-sibling::table")
table
table[2]
table <- html_table((table[2])) %>% .[[1]] %>% .[-1,]
table
table[,1] <- gsub(".\n","", table[,1])
table[,1] <- gsub("\t","", table[,1])
table[,1] <- gsub("\r","", table[,1])
table[,1] <- gsub("\\h{2,10}$", "", table[,1], perl = T)
table[,1] <- gsub("\\h{2,10}", "\\h", table[,1], perl = T)
table <- cbind(table, rep(seat, nrow(table)), rep(city,nrow(table)), rep(year,nrow(table)))
table
results <- rbind(results, table)
for (seat in 142:272){
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- as.character(city)
city <- paste(city, collapse = "")
city <- gsub(".*NA\\d{1,3} ","", city)
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election","",city)
city <- gsub(" General.*","", city)
city <- gsub(" \\d{4}$","",city)
city <- gsub("^ ","", city)
table <- html_nodes(gob, xpath = "//h3/following-sibling::table")
#for seat 38 >>>> table <- html_nodes(gob, xpath = "//table[@id = 'AutoNumber1']")
#for seat 141 >>>> table <- html_nodes(gob, xpath = "//h2/following-sibling::table")
table <- html_table((table[2])) %>% .[[1]] %>% .[-1,]
table[,1] <- gsub(".\n","", table[,1])
table[,1] <- gsub("\t","", table[,1])
table[,1] <- gsub("\r","", table[,1])
table[,1] <- gsub("\\h{2,10}$", "", table[,1], perl = T)
table[,1] <- gsub("\\h{2,10}", "\\h", table[,1], perl = T)
table <- cbind(table, rep(seat, nrow(table)), rep(city,nrow(table)), rep(year,nrow(table)))
results <- rbind(results, table)
Sys.sleep(3)
}
tail(results)
for (seat in 142:272){
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- as.character(city)
city <- paste(city, collapse = "")
city <- gsub(".*NA\\d{1,3} ","", city)
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election","",city)
city <- gsub(" General.*","", city)
city <- gsub(" \\d{4}$","",city)
city <- gsub("^ ","", city)
table <- html_nodes(gob, xpath = "//h3/following-sibling::table")
#for seat 38 >>>> table <- html_nodes(gob, xpath = "//table[@id = 'AutoNumber1']")
#for seat 141 >>>> table <- html_nodes(gob, xpath = "//h2/following-sibling::table")
#for seat 141>>>>>table <- html_table((table[2])) %>% .[[1]] %>% .[-1,]
table <- html_table((table)) %>% .[[1]] %>% .[-1,]
table[,1] <- gsub(".\n","", table[,1])
table[,1] <- gsub("\t","", table[,1])
table[,1] <- gsub("\r","", table[,1])
table[,1] <- gsub("\\h{2,10}$", "", table[,1], perl = T)
table[,1] <- gsub("\\h{2,10}", "\\h", table[,1], perl = T)
table <- cbind(table, rep(seat, nrow(table)), rep(city,nrow(table)), rep(year,nrow(table)))
results <- rbind(results, table)
Sys.sleep(3)
}
tail(results)
seat <-237
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
city <- html_nodes(gob, xpath = "//h3/font/text()")
city <- as.character(city)
city <- paste(city, collapse = "")
city <- gsub(".*NA\\d{1,3} ","", city)
city <- gsub(".*NA-\\d{1,3} ","", city)
city <- gsub(" G.E.*","",city)
city <- gsub(" Election","",city)
city <- gsub(" General.*","", city)
city <- gsub(" \\d{4}$","",city)
city <- gsub("^ ","", city)
city
city <- html_nodes(gob, xpath = "//h3/font/text()")
city
gob
gob[2]
gob[[2]]
gob[1]
gob[[1]][2]
table <- html_nodes(gob, xpath = "//h3/following-sibling::table")
table
gob
class(gob)
rawdata
seat
seat <- 236
link <- paste("http://www.electionpakistani.com/ge", year, "/NA-", seat, ".htm", sep ="")
rawdata <- getURL(link, cainfo = cert)
gob <- read_html(rawdata)
gob
city <- html_nodes(gob, xpath = "//h3/font/text()")
city
